---
layout: default
title: iframe跨域参数传递方式
comments: true
tags: notes
---
# iframe跨域参数传递方式

iframe跨域参数传递方式主要分为3种:   
1.iframe的location.hash
2.通过window.name
3.通过HTML5 API:PostMessage

location.hash 方式的缺陷主要在于url

外层域名a.com页面代码
```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>PostMessage</title>
<head>
<body>
<iframe id="f" src="http://a.com/inner.html" onload="sendMsg()"></iframe>
<div class="content"></div>
<script>
window.addEventListener('message',function(e){
	document.getElementsByClassName('content')[0].innerHTML=e.data;	
},false);

function sendMsg(){
	var _iframe=window.frames[0];
	_iframe.postMessage("PostMessage outer to inner","http://a.com/inner.html");
}
</script>
</body>
</html>
```   
  
内层域名b.com页面代码
```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>PostMessage</title>
<head>
<body>
<script>
window.addEventListener('message',function(e){
  	if (e.origin !== "http://a.com")return;
	document.write(e.data);	
	e.source.postMessage("PostMessageinner to outer",e.origin);	
});
</script>
</body>
</html>
```   
![运行结果]({{ site.url }}/assets/iframe跨域参数传递方式/demo.jpg)




