<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]--> <title>BFC概念与实际应用场景</title> <meta name="description" content="BFC定义BFC是CSS2.1引入的一个概念，与早期IE版本中的hasLayout属性（在IE8中已经删除）类似，在MDN上定义如下： "> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://kylar.cn/2015/01/19/BFC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.html"> <link rel="alternate" type="application/rss+xml" title="Kylar" href="http://kylar.cn/feed.xml" /> <script src="/assets/js/prefixfree.js"></script> </head> <body> <aside id="sidebar"> <div id="sidebar-left"> <a id="sidebar-avatar" href="/"> <img id="sidebar-avatar-img" alt="" src="/assets/img/avatar.jpg"/> </a> <ul id="sidebar-tags"> <li class="sidebar-tag active" data-filter="all">全部文章</li> <li class="sidebar-tag" data-filter="我的作品">我的作品</li> <li class="sidebar-tag" data-filter="我的笔记">我的笔记</li> </ul> </div> <div id="sidebar-right"> <div id="search-box"> <input id="search-input" type="text" placeholder="Search" /> </div> <nav id="toc"> <a class="toc-link" data-tags="我的笔记" href="/jekyll/update/2015/05/25/%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F%20.html"> 垂直居中的几种方式 </a> <a class="toc-link" data-tags="我的作品" href="/2015/05/18/%E8%B5%84%E6%BA%90%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BDLazyload%E5%AE%9E%E7%8E%B0.html"> 资源异步加载Lazyload实现 </a> <a class="toc-link" data-tags="我的笔记" href="/2015/05/14/%E5%AE%9E%E7%8E%B0%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81%E5%92%8C%E5%87%BD%E6%95%B0%E5%8E%BB%E6%8A%96.html"> 实现函数节流和函数去抖 </a> <a class="toc-link" data-tags="我的笔记 我的作品" href="/2015/04/23/%E7%94%A8EMCAScript6%E6%9D%A5%E5%BC%80%E5%8F%91%E6%A8%A1%E5%9D%97.html"> 用EMCAScript6来开发模块 </a> <a class="toc-link" data-tags="我的作品" href="/2015/04/01/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%B0%83%E8%AF%95%E9%9D%A2%E6%9D%BF-MinPanel%20.html"> 移动端调试面板-MinPanel </a> <a class="toc-link" data-tags="我的作品 我的笔记" href="/jekyll/update/2015/03/31/MinRequest-%E8%BD%BB%E9%87%8F%E5%8C%96jsonp%E8%B7%A8%E5%9F%9F%E5%AE%9E%E7%8E%B0.html"> MinRequest-轻量化jsonp跨域实现 </a> <a class="toc-link" data-tags="我的作品" href="/2015/03/28/mBaseCli-%E5%8E%9F%E5%AD%90%E5%8C%96%E6%A8%A1%E5%9D%97%E4%BE%9D%E8%B5%96%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html"> mBaseCli-原子化模块依赖解决方案 </a> <a class="toc-link" data-tags="我的笔记" href="/jekyll/update/2015/03/09/IOS-position-fixed.html"> iOS position fixed 在输入框获得焦点时定位失效 </a> <a class="toc-link" data-tags="我的作品" href="/2015/02/13/FTP%E7%8E%AF%E5%A2%83%E5%8F%91%E5%B8%83%E6%B5%81%E7%A8%8B%E5%92%8C%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7.html"> FTP环境发布流程和版本管理工具 </a> <a class="toc-link" data-tags="我的笔记" href="/2015/02/10/WebApp%E5%8F%91%E5%B1%95%E8%B6%8B%E5%8A%BF%E7%9A%84%E4%B8%80%E4%BA%9B%E5%88%86%E6%9E%90%E5%92%8C%E7%9C%8B%E6%B3%95.html"> WebApp发展趋势的一些分析和看法 </a> <a class="toc-link" data-tags="我的笔记" href="/2015/02/02/%E4%BD%BF%E7%94%A8ES6+Babel+Broswerify%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91.html"> 使用ES6+Babel+Broswerify进行开发 </a> <a class="toc-link" data-tags="我的笔记" href="/2015/01/19/BFC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.html"> BFC概念与实际应用场景 </a> <a class="toc-link" data-tags="我的作品" href="/2015/01/17/%E8%B7%A8%E7%BB%88%E7%AB%AF%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7-HttpProxyServer.html"> 跨终端代理工具-HttpProxyServer </a> <a class="toc-link" data-tags="我的作品" href="/2015/01/05/mBase%E8%A7%86%E8%A7%89%E6%A0%B7%E5%BC%8F%E5%BA%93.html"> mBase视觉样式库 </a> <a class="toc-link" data-tags="我的笔记" href="/2014/11/29/iframe%E8%B7%A8%E5%9F%9F%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E6%96%B9%E5%BC%8F.html"> iframe跨域参数传递方式 </a> <a class="toc-link" data-tags="我的笔记" href="/2014/11/09/AMD&CommonJS%E6%A8%A1%E5%9D%97%E6%A0%87%E5%87%86.html"> AMD&CommonJS模块标准 </a> <a class="toc-link" data-tags="我的笔记" href="/jekyll/update/2014/10/29/this%E4%B8%8E%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%A8%A1%E5%BC%8F.html"> this与函数调用模式 </a> <a class="toc-link" data-tags="我的笔记" href="/2014/10/15/%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html"> 模块开发中的设计模式 </a> <a class="toc-link" data-tags="我的作品" href="/2014/09/23/%E8%BF%90%E8%90%A5%E7%BB%84%E4%BB%B6%E5%BA%93.html"> 运营组件库 </a> <a class="toc-link" data-tags="我的作品" href="/2014/08/27/%E7%AE%80%E5%8C%96%E6%B5%8F%E8%A7%88%E5%99%A8Url%E6%93%8D%E4%BD%9C--EasyUrl.html"> 简化浏览器Url操作--EasyUrl </a> <a class="toc-link" data-tags="我的作品" href="/2014/07/18/%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%AD%E9%97%B4%E5%88%86%E4%BA%AB%E9%A1%B5%E7%94%9F%E6%88%90%E6%9C%8D%E5%8A%A1.html"> 自动化中间分享页生成服务 </a> <a class="toc-link" data-tags="我的作品" href="/2014/07/05/Web-Compoents%E4%B8%AD%E6%96%87%E7%BD%91.html"> Web-Components中文网 </a> <a class="toc-link" data-tags="我的笔记" href="/2014/06/17/flexbox%E5%B8%83%E5%B1%80%E7%9A%84%E7%89%88%E6%9C%AC%E5%8C%BA%E5%88%AB%E5%92%8C%E4%BD%BF%E7%94%A8.html"> flexbox布局的版本区别和使用 </a> <a class="toc-link" data-tags="我的作品" href="/jekyll/update/2014/06/03/%E7%A7%BB%E5%8A%A8%E7%BB%84%E4%BB%B6%E6%96%87%E6%A1%A3%E7%B3%BB%E7%BB%9F.html"> 移动组件文档系统 </a> </nav> </div> </aside> <main id="main"> <article class="post container"> <div class="post-meta"> <span class="post-meta-span date">2015 January 19</span> <span class="post-meta-span tag">我的笔记</span> </div> <h1 class="post-title">BFC概念与实际应用场景</h1> <h2 id="bfc">BFC定义</h2> <p>BFC是CSS2.1引入的一个概念，与早期IE版本中的hasLayout属性（在IE8中已经删除）类似，在MDN上定义如下： </p> <p>``` A block formatting context is a part of a visual CSS rendering of a Web page. It is the region in which the layout of block boxes occurs and in which floats interact with each other.</p> <p>A block formatting context contains everything inside of the element creating it that is not also inside a descendant element that creates a new block formatting context.</p> <p>Block formatting contexts are important for the positioning (see float) and clearing (see clear) of floats. The rules for positioning and clearing of floats apply only to things within the same block formatting context. Floats do not affect the layout of things in other block formatting contexts, and clear only clears past floats in the same block formatting context.</p> <p>``` </p> <p>BFC可以认为是一个隔离内外元素的独立容器，子元素的布局不会影响到外部元素的布局，反之外部元素的布局也不会影响到内部元素。 </p> <h2 id="bfc-1">触发BFC的方法</h2> <p>同样来自MDN定义： </p> <ul> <li>the root element or something that contains it</li> <li>floats (elements where float is not none)</li> <li>absolutely positioned elements (elements where position is absolute or fixed)</li> <li>inline-blocks (elements with display: inline-block)</li> <li>table cells (elements with display: table-cell, which is the default for HTML table cells)</li> <li>table captions (elements with display: table-caption, which is the default for HTML table captions)</li> <li>elements where overflow has a value other than visible</li> <li>flex boxes (elements with display: flex or inline-flex)</li> </ul> <h2 id="bfc-2">BFC的特性</h2> <ol> <li>块级格式化上下文不会重叠浮动元素 </li> </ol> <p>根据规定，一个块级格式化上下文的边框不能和它里面的元素的外边距重叠。这就意味着浏览器将会给块级格式化上下文创建隐式的外边距来阻止它和浮动元素的外边距叠加。由于这个原因，当给一个挨着浮动的块级格式化上下文添加负的外边距时将会不起作用。 </p> <ol> <li>块级格式化上下文会阻止外边距叠加 </li> </ol> <p>当两个相邻的块框在同一个块级格式化上下文中时，它们之间垂直方向的外边距会发生叠加。换句话说，如果这两个相邻的块框不属于同一个块级格式化上下文，那么它们的外边距就不会叠加。 </p> <ol> <li>块级格式化上下文通常可以包含浮动</li> </ol> <h2 id="bfc-3">BFC的应用场景</h2> <p>根据BFC的这2条特性可以在实际的生产环境中解决许多比较常见得问题</p> <p>1.闭合浮动</p> <p><img src="http://kylar.cn/assets/BFC概念与实际应用场景/bfc-case-1.jpg" alt="闭合浮动前" /></p> <p>左边的图片因为引入了浮动，造成wrapper的塌陷，在2行布局中是一个常见得问题，有许多的方法来清除浮动</p> <p>解决的方案是让右边的元素触发BFC。如下图所示： </p> <p><img src="http://kylar.cn/assets/BFC概念与实际应用场景/bfc-case-2.jpg" alt="闭合浮动后" /> </p> <p>2.合并外边距</p> <p>在同一个BFC内，相邻的两个盒子模型（可能是兄弟关系也可能是父子关系）的外边距（margin）会合并成一个单独的外边距。这种合并外边距的行为被称为折叠外边距。</p> <ul> <li>两个相邻的外边距都是正数时，折叠结果是它们两者之间较大的值( 10px 20px 结果为20px )。</li> <li>两个相邻的外边距都是负数时，折叠结果是两者绝对值较大的值( -10px -20px 结果是-20px )。</li> <li>两个外边距一正一负时，折叠结果是两者的相加的和( 10px -20px 结果是10px )。 </li> </ul> <p>在同一个BFC内时：</p> <p><img src="http://kylar.cn/assets/BFC概念与实际应用场景/bfc-case-3.jpg" alt="折叠外边距" /> </p> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;line-blk&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;ns-line-b&quot;</span> <span class="na">style=</span><span class="s">&quot;margin: 10px 0;&quot;</span><span class="nt">&gt;</span>我的电影票<span class="nt">&lt;/p&gt;</span>
		<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;ns-line-b&quot;</span> <span class="na">style=</span><span class="s">&quot;margin: 10px 0;&quot;</span><span class="nt">&gt;</span>我收藏的影片<span class="nt">&lt;/p&gt;</span>
		<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;ns-line-b&quot;</span> <span class="na">style=</span><span class="s">&quot;margin: 10px 0;&quot;</span><span class="nt">&gt;</span>收到的消息<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div> <p>划分为不同得BFC区域后：</p> <p><img src="http://kylar.cn/assets/BFC概念与实际应用场景/bfc-case-4.jpg" alt="折叠外边距消失" /> </p> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;line-blk&quot;</span><span class="nt">&gt;</span>
	<span class="c">&lt;!-- 单独的一个BFC --&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;overflow: hidden;&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;ns-line-b&quot;</span> <span class="na">style=</span><span class="s">&quot;margin: 10px 0;&quot;</span><span class="nt">&gt;</span>我的电影票<span class="nt">&lt;/p&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
	<span class="c">&lt;!-- 单独的一个BFC --&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;overflow: hidden;&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;ns-line-b&quot;</span> <span class="na">style=</span><span class="s">&quot;margin: 10px 0;&quot;</span><span class="nt">&gt;</span>我收藏的影片<span class="nt">&lt;/p&gt;</span>
	<span class="nt">&lt;/div&gt;</span>  
	<span class="c">&lt;!-- 单独的一个BFC --&gt;</span>                 
	<span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;overflow: hidden;&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;ns-line-b&quot;</span> <span class="na">style=</span><span class="s">&quot;margin: 10px 0;&quot;</span><span class="nt">&gt;</span>收到的消息<span class="nt">&lt;/p&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div> </article> <div class="post-share"> <div class="container"> <a href="https://twitter.com/share?url=http://kylar.cn/2015/01/19/BFC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.html&text=BFC概念与实际应用场景" target="_blank" class="post-share-icon twitter"></a> <a href="https://www.evernote.com/clip.action?url=http://kylar.cn/2015/01/19/BFC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.html&title=BFC概念与实际应用场景" target="_blank" class="post-share-icon evernote"></a> <a href="http://service.weibo.com/share/share.php?url=http://kylar.cn/2015/01/19/BFC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.html&title=BFC概念与实际应用场景" target="_blank" class="post-share-icon weibo"></a> </div> </div> <div class="comment container"> <div id="disqus_thread"></div> <script type="text/javascript"> /* * * CONFIGURATION VARIABLES * * */ var disqus_shortname = 'devwayne'; /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a> </noscript> </div> <div class="footer"> <div class="container"> <p class="footer-entry">Copyright © 2015 kylar.cn Hosted on <a href="https://pages.github.com/" target="_blank">Github</a></p> </div> </div> </main> <button id="menu"> <span id="menu-icons"></span> </button> <script src="/assets/js/jquery-2.1.3.min.js"></script> <script src="/assets/js/jquery.pjax.js"></script> <script src="/assets/js/nprogress.js"></script> <script src="/assets/js/main.js"></script> </body> </html>
